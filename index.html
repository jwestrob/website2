<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Jacob West‑Roberts — Computational Biology</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0A0A0A" />
  <link rel="icon" href="assets/poster/hero-poster.jpg">
  <link rel="preload" href="https://unpkg.com/three@0.161.0/build/three.module.js" as="script" crossorigin="anonymous">
  <link rel="preload" href="https://unpkg.com/three@0.161.0/examples/jsm/postprocessing/EffectComposer.js" as="script" crossorigin="anonymous">
  <link rel="preload" href="https://unpkg.com/three@0.161.0/examples/jsm/postprocessing/UnrealBloomPass.js" as="script" crossorigin="anonymous">
  <link rel="preload" href="https://unpkg.com/three@0.161.0/examples/jsm/postprocessing/ShaderPass.js" as="script" crossorigin="anonymous">
  <link rel="preload" href="https://unpkg.com/three@0.161.0/examples/jsm/shaders/FXAAShader.js" as="script" crossorigin="anonymous">
  <link rel="stylesheet" href="assets/css/site.css" />
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.161.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.161.0/examples/jsm/"
      }
    }
  </script>
</head>
<body>
  <canvas id="bg" aria-hidden="true"></canvas>
  <div class="overlay-gradient" aria-hidden="true"></div>

  <header id="site-header" class="site-header" data-collapsed="false" role="banner">
    <div class="header-inner">
      <div class="brand">Jacob West‑Roberts</div>
      <nav class="nav" aria-label="Primary">
        <a href="#work">Work</a>
        <a href="#art">Art</a>
        <a href="#research">Research</a>
        <a href="#contact">Contact</a>
      </nav>
      <div class="header-actions">
        <button id="toggle-controls" class="controls-toggle" aria-expanded="false" aria-controls="viz-controls" title="Open visualization controls">
          <span aria-hidden="true">⚙︎</span>
          <span class="controls-label">Controls</span>
        </button>
      </div>
    </div>
    <button id="toggle-header" class="header-handle" aria-expanded="true" aria-controls="site-header" aria-label="Toggle header">▲</button>
  </header>

  <aside id="hero-panel" class="hero-panel" data-collapsed="false" aria-label="Hero panel">
    <div class="panel-inner">
      <button id="toggle-panel" class="ghost left-handle" aria-expanded="true" aria-controls="hero-panel" aria-label="Collapse panel">‹</button>
      <h1>Computational Biology</h1>
      <p>Systems at the interface of <em>genomics</em>, <em>phylogenetics</em>, and <em>generative art</em>.</p>
      <div class="panel-cta">
        <a class="btn btn-gold" href="#work">Selected work</a>
        <a class="btn" href="#art">Art</a>
      </div>
    </div>
  </aside>

  <aside id="viz-controls" class="viz-controls" data-collapsed="true" aria-hidden="true" aria-labelledby="toggle-controls">
    <div class="controls-inner" role="dialog" aria-modal="false">
      <header class="controls-head">
        <h2>Visualization Controls</h2>
        <button id="close-controls" class="ghost" aria-label="Close controls">✕</button>
      </header>
      <form id="controls-form">
        <fieldset>
          <legend>Sequence</legend>
          <div class="control-stack">
            <label for="ctl-sequence">Paste DNA / protein sequence</label>
            <textarea id="ctl-sequence" class="control-textarea" spellcheck="false" placeholder="ACGT… or ARND…WYV"></textarea>
          </div>
          <div class="controls-row">
            <button type="button" id="ctl-apply-sequence" class="btn btn-gold">Render sequence</button>
            <button type="button" id="ctl-center" class="btn">Center view</button>
          </div>
          <p class="control-hint">Sequences map deterministically; honors DNA &amp; protein alphabets.</p>
          <p id="ctl-status" class="control-status" role="status" aria-live="polite">Ready.</p>
        </fieldset>

        <section class="telemetry" aria-live="polite" aria-atomic="true">
          <header>
            <span class="dot"></span>
            <span class="telemetry-title">Active Parameters</span>
          </header>
          <pre id="ctl-telemetry" class="telemetry-body">loading…</pre>
        </section>

        <fieldset>
          <legend>Animation Toggles</legend>
          <label><input type="checkbox" id="ctl-anim-slice"> Slice sweep</label>
          <label><input type="checkbox" id="ctl-anim-rotate"> 4D rotate (z–w)</label>
          <label><input type="checkbox" id="ctl-anim-cloop"> c(t) loop</label>
        </fieldset>

        <fieldset>
          <legend>Fractal</legend>
          <label>Slice (w) <input type="range" id="ctl-slice" min="-0.95" max="0.95" step="0.01"></label>
          <label>Symmetry <input type="range" id="ctl-fold" min="0" max="1" step="0.01"></label>
          <label>Detail (iters) <input type="range" id="ctl-iters" min="8" max="32" step="1"></label>
        </fieldset>

        <fieldset>
          <legend>Appearance</legend>
          <label>Bloom <input type="range" id="ctl-bloom" min="0" max="2" step="0.01"></label>
          <label>Exposure <input type="range" id="ctl-exposure" min="0.6" max="1.8" step="0.01"></label>
          <label>Roughness <input type="range" id="ctl-rough" min="0.05" max="0.8" step="0.01"></label>
        </fieldset>

        <fieldset>
          <legend>Animation</legend>
          <label>Amplitude <input type="range" id="ctl-slice-amp" min="0" max="0.4" step="0.005"></label>
          <label>Speed <input type="range" id="ctl-slice-speed" min="0" max="0.15" step="0.001"></label>
          <label>Rotate speed <input type="range" id="ctl-rotate-speed" min="0" max="0.1" step="0.001"></label>
          <label>Loop scale <input type="range" id="ctl-cloop-scale" min="0" max="1" step="0.01"></label>
          <label>Loop speed <input type="range" id="ctl-cloop-speed" min="0" max="0.1" step="0.001"></label>
        </fieldset>

        <fieldset class="docs-group">
          <legend>
            <button type="button" id="ctl-docs-toggle" class="btn-docs" aria-expanded="false" aria-controls="ctl-docs-content">Docs</button>
          </legend>
          <div id="ctl-docs-content" class="docs-content" hidden>
            <section class="docs-pane" id="doc-sequences">
              <h3>Sequences</h3>
              <p>Paste DNA (ACGTN) or protein (standard amino acids) strings. The renderer maps length, entropy, GC content, and residue properties onto quaternion parameters.</p>
            </section>
            <section class="docs-pane" id="doc-animation">
              <h3>Animation</h3>
              <p>Slice sweep oscillates the w-plane. 4D rotation spins z–w. The c(t) loop traces a bounded path through quaternion space for evolving structures.</p>
            </section>
            <section class="docs-pane" id="doc-controls">
              <h3>Controls</h3>
              <p>All sliders update in real time. Use “Center view” after large adjustments to re-anchor the distance estimator.</p>
            </section>
          </div>
        </fieldset>
      </form>
    </div>
  </aside>

  <main id="content">
    <div id="hero-sentinel" aria-hidden="true"></div>

    <section id="cv" class="section section--opaque">
      <h2>Curriculum Vitae</h2>
      <p>(Content placeholder)</p>
    </section>

    <section class="section section--skip" aria-hidden="true"></section>

    <section id="contact" class="section section--opaque">
      <h2>Contact</h2>
      <p>(Content placeholder)</p>
    </section>
  </main>

  <noscript>
    <style>#bg{display:none}.overlay-gradient{display:none}</style>
    <p style="color:#eee;padding:1rem;background:#111">JavaScript is required to render the visualization.</p>
  </noscript>

  <script type="module">
    import { createVisualizer } from './assets/js/visualizer.js';
    const canvas = document.getElementById('bg');
    const viz = await createVisualizer(canvas, {
      animateSlice: true,
      animateRotation: false,
      animateCLoop: false,
      sliceAmplitude: 0.18,
      sliceSpeed: 0.002,
      bloom: 0.55,
      exposure: 1.15,
      roughness: 0.26,
      fold: 0.80,
      iterations: 24,
      slice: 0.10,
      cameraDistance: 4.0
    });
    window.__viz = viz;

    const mq = window.matchMedia('(prefers-reduced-motion)');
    const applyRM = () => mq.matches ? viz.pause() : viz.resume();
    applyRM();
    if ('addEventListener' in mq) mq.addEventListener('change', applyRM);

    const { initLayout } = await import('./assets/js/layout.js');
    const { initControls } = await import('./assets/js/ui-controls.js');
    initLayout({ viz });
    initControls({ viz });
  </script>
</body>
</html>
